### Phase 4 – Windows Server Deployment

#### 🔥 Goal
Deploy a Windows Server as Domain Controller to manage **DHCP**, **DNS**, and user authentication across the lab.

---

#### 🧱 Components

- **Windows Server 2022 (Eval)**
  - Acts as **Domain Controller**, **DHCP**, and **DNS**
  - Domain: `reuben.local`
  - Promoted via Server Manager with Forest functional level: Server 2016
  - Static IP: `10.10.20.10` (VLAN 20)
  - DHCP Scope: `10.10.20.100 – 10.10.20.120`
  - Gateway: `10.10.20.254`

- **Active Directory Users**
  - `Reuben Fernandes` – normal privileges
  - `RF Admin` – Domain Admins group
  - Bulk users created with PowerShell script into `OU=Users,DC=reuben,DC=local`:
    - Alice Doe
    - Bob Smith
    - Daisy Johnson
    - Evan Lee
    - Fiona Clark
    - George Hall
    - Hannah Lewis

---

#### ⚙️ Specs

| Component | Details                      |
|-----------|------------------------------|
| OS        | Windows Server 2022 Eval     |
| CPU       | 2 vCPUs                      |
| RAM       | 4 GB (6 GB recommended)      |
| Disk      | 45 GB                        |
| Network   | VLAN 20                      |

---

#### 🛠️ Setup Steps

1. **Download Windows Server ISO**
   - From official Microsoft Eval center
   - Also download Proxmox VirtIO ISO for driver support

2. **Create VM in Proxmox**
   - Attach both ISOs
   - Use 2 vCPUs, 4 GB RAM, 45 GB disk

3. **Install VirtIO Drivers During Setup**
   - Load driver to detect disk
   - Proceed with OS install

4. **Initial Configuration**
   - Set static IP: `10.10.20.10`
   - Rename machine to `WS-DC01`
   - Join internal lab network

5. **Disable pfSense DHCP on VLAN 20**
   - Done via pfSense web UI

6. **Install DHCP & DNS Roles**
   - Open Server Manager → Add Roles & Features
   - Add DHCP and DNS
   - Restart server

7. **Promote to Domain Controller**
   - Create Forest: `reuben.local`
   - Set forest/domain level to Server 2016

8. **Configure DHCP Scope**
   - Scope Name: `VLAN 20`
   - Range: `10.10.20.100 – 10.10.20.120`
   - Gateway: `10.10.20.254`
   - Activate Scope

9. **Bulk Create AD Users**
   - Used custom PowerShell script to populate lab with test users
   - All users added to appropriate OU with preset passwords and settings

---

> 🧪 Validate: Ensure other machines on VLAN 20 receive IPs via the Windows DHCP server and can resolve DNS through it. Test domain join and authentication for one client (e.g. Windows 10 or Ubuntu).
